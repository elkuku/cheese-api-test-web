{% extends 'base.html.twig' %}

{% block title %}Hello SecurityController!{% endblock %}

{% block body %}
    <form action="{{ path('app_login') }}" method="post" id="login-form">
        <input type="text" name="email" id="email">
        <input type="text" name="password" id="password">
        <div id="send">send</div>
    </form>
    <script>
        $('#send').click(function(){
            // const zData = {'email':$('#email').val(),password:$('#password').val()}
            const data = JSON.stringify({'email':$('#email').val(),password:$('#password').val()})
            $.ajax({
                url: "login",
                type: 'POST',
                data: data,
                contentType:"application/json; charset=utf-8",
                dataType:"json",
                success: function (data, textStatus, request) {
                    // do something with the result
                    console.log(data)
                    console.log(request.getAllResponseHeaders());
                    console.log(request.getResponseHeader('location'));
                    window.location.replace("/");
                }
            });

        })
    </script>


{% endblock %}
